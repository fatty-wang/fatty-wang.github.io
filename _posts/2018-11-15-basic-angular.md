---
layout: post
title: "Angular基础架构"
date: 2018-11-15 
author: "WangX"
catalog: true
header-style: text
tags:
    - 前端
    - Angular
    - basic
---


## 概述

* 模块：Angular 应用就是由一组NgModule定义出的。至少有一个用于引导应用的根模块(AppModule)，通常还会有很多特性模块。模块为组件提供了编译的上下文环境。
* 组件：至少有一个组件，根组件，把组件树和页面中的 DOM 连接起来。 每个组件都会定义一个类，其中包含应用的数据和逻辑，并与一个 HTML 模板相关联，该模板定义了一个供目标环境下显示的视图。
* 服务：与特定视图无关并希望跨组件共享的数据或逻辑，可以创建服务类。并且可以把服务作为依赖注入到组件中。
> 模块为组件提供了编译上下文环境，组件定义视图，组件使用服务。

## 模块NgModule

* NgModule 是一个带有 @NgModule() 装饰器的类。@NgModule() 装饰器是一个函数，它接受一个元数据对象，该对象的属性用来描述这个模块。
元数据对象中属性的含义：
* **declarations** 声明本模块中拥有的视图类。Angular有三种视图类：组件、指令和管道。
* **exports** declarations的子集，可用于其它模块的组件模板。
* **imports** 本模块的组件模板所需要的类的其他模块。
* **providers** 本模块向全局服务中贡献的那些服务的创建器。 这些服务能被本应用中的任何部分使用。
* **bootstrap**  应用的主视图，称为根组件。它是应用中所有其它视图的宿主。只有根模块才应该设置这个 bootstrap 属性

## 组件 (component)
* component是一个带有 @Component装饰器的类。
元数据对象中属性的含义：
* **selector** 是一个 CSS 选择器，它会告诉 Angular，一旦在模板 HTML 中找到了这个选择器对应的标签，就创建并插入该组件的一个实例。
* **templateUrl**  该组件的 HTML 模板文件相对于这个组件文件的地址。 另外，你还可以用 template 属性的值来提供内联的 HTML 模板。 这个模板定义了该组件的宿主视图。
* **providers**  当前组件所需的服务的一个数组。

## 服务和依赖注入

* 服务是一个广义的概念，它包括应用所需的任何值、函数或特性。狭义的服务是一个明确定义了用途的类。Angular 把组件和服务区分开，以提高模块性和复用性。Angular 对于服务没有什么特定的定义。

#### 依赖注入
* 当 Angular 创建组件类的新实例时，它会通过查看该组件类的**构造函数**，来决定该组件依赖哪些服务或其它依赖项。  
* 当 Angular 发现某个组件依赖某个服务时，它会首先检查是否该注入器中已经有了那个服务的任何现有实例。如果所请求的服务尚不存在，注入器就会使用以前注册的服务提供商来制作一个，并把它加入注入器中，然后把该服务返回给 Angular。

* 要注册提供商，就要在服务的 **@Injectable()** 装饰器中提供它的元数据，或者在 **@NgModule()** 或 **@Component()** 的元数据中。